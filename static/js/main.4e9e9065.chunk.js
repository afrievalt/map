(this["webpackJsonpparent-pickup"]=this["webpackJsonpparent-pickup"]||[]).push([[0],{121:function(e,t,n){"use strict";n.r(t);var r=n(3),c=n(0),a=n(11),o=n.n(a),i=(n(41),n(12)),u=n(38),s=n(27),l=n(33),d=n(5),f=n(65),b=n.n(f),j=Object(s.b)({name:"chargeLocations",initialState:{foundChargeLocations:[],loading:!1,error:null,selected:null},reducers:{selectChargeLocations:function(e,t){var n=(t||{}).payload;e.selected=n},fetchChargeLocationsRequest:function(e,t){t.payload;e.loading=!0,e.error=null},fetchChargeLocationsSuccess:function(e,t){var n=(t||{}).payload,r=void 0===n?[]:n;e.foundChargeLocations=r,e.loading=!1,e.error=null},fetchChargeLocationsFailure:function(e,t){e.loading=!1,e.error=t.payload}}}),O=j.actions.fetchChargeLocationsRequest,v=j.actions,p=v.fetchChargeLocationsSuccess,h=v.fetchChargeLocationsFailure,m=j.reducer,g={HOME:"/",STATION:"/station/:id"},y=Object(l.c)(g).reducer,x=Object(d.c)({chargeLocations:m,location:y}),C=Object(l.c)(g,{initialDispatch:!1}),L=C.middleware,k=C.enhancer,w=C.initialDispatch,S=Object(s.c)({serializableCheck:!1});var z=function(){var e=Object(s.a)({reducer:x,middleware:[].concat(Object(u.a)(S),[L]),enhancers:function(e){return[k].concat(Object(u.a)(e))}});return w(),e}(),I=(z.dispatch,z),T=function(e){var t=e.children;return Object(r.jsx)(i.a,{store:I,children:t})},E=Object(c.memo)(T),A=n(22),F=n(21),M=n.n(F);var R=function(e){var t=Object(c.useRef)(!1);Object(c.useEffect)((function(){t.current||(t.current=!0,e())}),[e])},N=Object(c.createContext)();M.a.accessToken="pk.eyJ1IjoiYWZyaWV2YWx0IiwiYSI6ImNrcHp0MWF6djAzOWYycW80ODR2MHdlN2kifQ.VCne9A82z8X0QfaUqp59NA",M.a.workerClass=n(120).default;var W=43.0292238997657,K=-87.9368712076874;function q(e){var t=e.children,n=Object(c.useRef)(null),a=Object(c.useRef)(null),o=Object(c.useState)(K),i=Object(A.a)(o,2),u=i[0],s=i[1],l=Object(c.useState)(W),d=Object(A.a)(l,2),f=d[0],b=d[1],j=Object(c.useState)(11),O=Object(A.a)(j,2),v=O[0],p=O[1];R((function(){a.current=new M.a.Map({container:n.current,style:"mapbox://styles/mapbox/streets-v11",center:[u,f],zoom:v}),a.current.on("move",(function(){s(a.current.getCenter().lng.toFixed(4)),b(a.current.getCenter().lat.toFixed(4)),p(a.current.getZoom().toFixed(2))}))}));var h={map:a.current,lat:f,lng:u,zoom:v};return Object(r.jsx)(N.Provider,{value:h,children:Object(r.jsxs)("div",{children:[Object(r.jsx)("div",{ref:n,className:"map-container"}),t]})})}var H=n(6),P={coordinates:n.n(H).a.array.isRequired},Y=function(e){var t=e.coordinates,n=Object(c.useContext)(N).map;return Object(c.useEffect)((function(){var e=new M.a.Marker;return n&&e.setLngLat(t).addTo(n),function(){e.remove()}}),[n,t]),null};Y.propTypes=P;var D=Y,J=n(13),Q={},U=function(e){return e.location},V=Object(J.a)((function(e){return e.chargeLocations.foundChargeLocations}),(function(e){var t=[];return e.filter((function(e){var n=e.id;return!t.includes(n)&&(t.push(n),!0)}))})),Z=Object(J.a)(V,U,(function(e,t){var n=((t||Q).payload||Q).id;return console.log({id:n}),e.map((function(e){var t=e||Q,n=t.addressInfo,r=t.id,c=n||Q,a=c.latitude;return{coordinates:[c.longitude,a],id:r}})).filter((function(e){return!n||+n===+e.id}))})),B=n(18),X=n(139),G=n(141),$=n(39),_=n(140),ee=n(69);var te=function(e){var t,n,r=e.routeKey,a=e.children,o=Object(ee.a)(e,["routeKey","children"]),u=c.Children.only(a),s=function(e){var t=Object(i.b)();return Object(c.useMemo)((function(){return Array.isArray(e)?e.map((function(e){return Object(d.b)(e,t)})):Object(d.b)(e,t)}),[t,e])}((t=r,n=o,function(){return{type:t,payload:n}}));return Object(c.cloneElement)(u,{onClick:s})},ne=function(e){var t=e.routeKey,n=e.routeParameters,c=e.children;return Object(r.jsx)(te,Object($.a)(Object($.a)({routeKey:t},n),{},{children:Object(r.jsx)(_.a,{button:!0,children:c})}))},re=n(14),ce={0:0,1:"0.25rem",2:"0.5rem",3:"0.75rem",4:"1rem",5:"1.25rem",6:"1.5rem",7:"1.75rem",8:"2rem",9:"2.25rem",10:"2.5rem"},ae=ce;function oe(){var e=Object(B.a)(["\n      padding: ",";\n      background-color:",";\n      border-width: ",";\n      border-color: black;\n      border-style: solid; \n    "]);return oe=function(){return e},e}var ie=re.b.div((function(e){var t=e.padding,n=void 0===t?2:t,r=e.background,c=void 0===r?"#f5faff":r,a=e.border,o=void 0===a?0:a;return Object(re.a)(oe(),ae[n]||null,c,ae[o]||null)})),ue={},se=Object(J.a)(V,U,(function(e,t){var n=t.payload;return e.map((function(e){var t=e||ue,r=t.addressInfo,c=t.id,a=t.connections,o=r||ue,i=o.title,u=o.town,s=o.addressLine1,l=o.accessComments,d=o.stateOrProvince,f=o.postcode,b=o.usageCost,j=c===+(null===n||void 0===n?void 0:n.id),O="".concat(u,", ").concat(d," ").concat(f);return{id:c,title:i,details:j?[s,O,l,b,"Connections: ".concat(a.length)].filter((function(e){return e})):[s]}}))}));function le(){var e=Object(B.a)(["\n  width: 20vw;\n"]);return le=function(){return e},e}function de(){var e=Object(B.a)(["\n  display: block;\n"]);return de=function(){return e},e}var fe=re.b.span(de()),be=Object(re.b)(ie)(le());var je=function(){var e=Object(i.c)(se);return Object(r.jsx)(be,{children:Object(r.jsx)(X.a,{children:e.map((function(e){return Object(r.jsx)(ne,{routeKey:"STATION",routeParameters:{id:e.id},children:Object(r.jsx)(G.a,{primary:e.title,secondary:e.details.map((function(e){return Object(r.jsx)(fe,{children:e},e)}))})},e.id)}))})})};function Oe(){var e=Object(B.a)(["\n      display: flex;\n      flex-direction: ",";\n      justify-content: ",";\n      align-items: ",";\n      > * + * {\n        margin-left: ",";\n        margin-top: ",";\n      }\n    "]);return Oe=function(){return e},e}var ve=re.b.div((function(e){var t=e.direction,n=void 0===t?"horizontal":t,r=e.justify,c=e.align,a=e.gap;return Object(re.a)(Oe(),"vertical"===n?"column":"row",r,c,"horizontal"===n?ce[a]:null,"vertical"===n?ce[a]:null)}));var pe=function(e,t){var n=Object(c.useState)(e),r=Object(A.a)(n,2),a=r[0],o=r[1];return Object(c.useEffect)((function(){var n=setTimeout((function(){o(e)}),t);return function(){clearTimeout(n)}}),[e,t]),a};var he=function(){var e=Object(i.b)(),t=Object(c.useContext)(N),n=pe(t,500),r=n.lat,a=n.lng,o=n.zoom;return Object(c.useEffect)((function(){e(function(e){return function(t){var n="".concat("https://api.openchargemap.io/v3/poi/?output=json&camelCase=true&compact=true&cammelCase=true&countrycode=US&maxresults=10&compact=true&verbose=false","&latitude=").concat(e.lat,"&longitude=").concat(e.lng,"&distance=50&key=").concat("c37feaa6-2d65-4697-bfbe-bbf4fa858c31");return console.log("inFetch",{search:e}),t(O()),b.a.get(n).then((function(e){return t(p(e.data))})).then((function(){return t({type:"HOME"})})).catch((function(e){return t(h(e))}))}}({lng:a,lat:r,zoom:o}))}),[a,r,o,e]),null};var me=function(){var e=Object(i.c)(Z);return console.log({mapLocations:e}),Object(r.jsxs)(ve,{children:[Object(r.jsx)(je,{}),Object(r.jsxs)(q,{children:[Object(r.jsx)(he,{}),e.map((function(e){return Object(r.jsx)(D,{coordinates:e.coordinates},e.id)}))]})]})};var ge=function(){return Object(r.jsx)(E,{children:Object(r.jsx)(me,{})})};o.a.render(Object(r.jsx)(ge,{}),document.getElementById("root"))},41:function(e,t,n){}},[[121,1,2]]]);
//# sourceMappingURL=main.4e9e9065.chunk.js.map